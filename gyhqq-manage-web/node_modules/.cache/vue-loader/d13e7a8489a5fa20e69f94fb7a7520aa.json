{"remainingRequest":"C:\\Projects\\IDEA\\hobby\\store\\gyhqq-manage-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Projects\\IDEA\\hobby\\store\\gyhqq-manage-web\\src\\components\\tree\\Tree.vue?vue&type=style&index=0&id=59567fa2&scoped=true&lang=css&","dependencies":[{"path":"C:\\Projects\\IDEA\\hobby\\store\\gyhqq-manage-web\\src\\components\\tree\\Tree.vue","mtime":1566198667880},{"path":"C:\\Projects\\IDEA\\hobby\\store\\gyhqq-manage-web\\node_modules\\css-loader\\index.js","mtime":1566198640111},{"path":"C:\\Projects\\IDEA\\hobby\\store\\gyhqq-manage-web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1566198662439},{"path":"C:\\Projects\\IDEA\\hobby\\store\\gyhqq-manage-web\\node_modules\\postcss-loader\\src\\index.js","mtime":1566198655128},{"path":"C:\\Projects\\IDEA\\hobby\\store\\gyhqq-manage-web\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1566198662963},{"path":"C:\\Projects\\IDEA\\hobby\\store\\gyhqq-manage-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1566198635392},{"path":"C:\\Projects\\IDEA\\hobby\\store\\gyhqq-manage-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1566198662436}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.item {\n  cursor: pointer;\n}\n",{"version":3,"sources":["Tree.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;AACA","file":"Tree.vue","sourceRoot":"src/components/tree","sourcesContent":["<template>\r\n  <v-list class=\"pt-0 pb-0\" dense>\r\n    <TreeItem\r\n      class=\"item\" :model=\"model\" v-for=\"(model, index) in db\" :key=\"index\"\r\n      :url=\"url\"\r\n      :isEdit=\"isEdit\"\r\n      :nodes=\"nodes\"\r\n      @handleAdd=\"handleAdd\"\r\n      @handleEdit=\"handleEdit\"\r\n      @handleDelete=\"handleDelete\"\r\n      @handleClick=\"handleClick\"\r\n    />\r\n  </v-list>\r\n</template>\r\n\r\n<script>\r\n  import TreeItem from './TreeItem';\r\n\r\n  export default {\r\n    name: \"vTree\",\r\n    props: {\r\n      url: String,\r\n      isEdit: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      treeData:{\r\n        type:Array\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        db: [],\r\n        nodes:{\r\n          opened:null,\r\n          selected:{isSelected:false}\r\n        }\r\n      }\r\n    },\r\n    components: {\r\n      TreeItem\r\n    },\r\n    created() {\r\n      if(this.treeData && this.treeData.length > 0){\r\n        this.db = this.treeData;\r\n        return;\r\n      }\r\n      this.getData();\r\n    },\r\n    methods: {\r\n      getData() {\r\n        this.$http.get(this.url, {params: {pid: 0}}).then(resp => {\r\n          this.db = resp.data;\r\n          this.db.forEach(n => n['path'] = [n.name])\r\n        })\r\n      },\r\n      handleAdd(node) {\r\n        this.$emit(\"handleAdd\", this.copyNodeInfo(node));\r\n      },\r\n      handleEdit(id, name) {\r\n        this.$emit(\"handleEdit\", id, name)\r\n      },\r\n      handleDelete(id) {\r\n        this.deleteById(id, this.db);\r\n        this.$emit(\"handleDelete\", id);\r\n      },\r\n      handleClick(node){\r\n        this.$emit(\"handleClick\", this.copyNodeInfo(node))\r\n      },\r\n      // 根据id删除\r\n      deleteById(id, arr) {\r\n        let src = arr || this.db;\r\n        for (let i in src) {\r\n          let d = src[i];\r\n          if (d.id === id) {\r\n            src.splice(i, 1)\r\n            return;\r\n          }\r\n          if (d.children && d.children.length > 0) {\r\n            this.deleteById(id, d.children)\r\n          }\r\n        }\r\n      },\r\n      copyNodeInfo(node){\r\n        const o = {};\r\n        for(let i in node){\r\n          o[i] = node[i];\r\n        }\r\n        return o;\r\n      }\r\n    },\r\n    watch: {}\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .item {\r\n    cursor: pointer;\r\n  }\r\n</style>\r\n"]}]}